from aiogram.types import Message, ReplyKeyboardMarkup, InlineKeyboardMarkup, CallbackQuery
import logging.handlers
import logging
import os
import aiogram
from aiogram.dispatcher.filters.state import StatesGroup, State
from aiogram.contrib.fsm_storage.memory import MemoryStorage
from aiogram.utils import executor
from aiogram.dispatcher import FSMContext
import dotenv

dotenv.load_dotenv()  # –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª .env
logger = logging.getLogger(__name__)
# –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
os.makedirs("Logs", exist_ok=True)

# C–æ–∑–¥–∞—ë—Ç –≤—Å–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç.
logging.basicConfig(  # –ß—Ç–æ–±—ã –±–æ—Ç —Ä–∞–±–æ—Ç–∞–ª —É—Å–ø–µ—à–Ω–æ, —Å–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ñ–∏–≥ —Å –±–∞–∑–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –±–æ—Ç–∞
    level=logging.INFO,
    format="[%(levelname)-8s %(asctime)s at           %(funcName)s]: %(message)s",
    datefmt="%d.%d.%Y %H:%M:%S",
    handlers=[logging.handlers.RotatingFileHandler("Logs/     TGBot.log", maxBytes=10485760, backupCount=0),
    logging.StreamHandler()])


class UserState(StatesGroup):  # –°–æ–∑–¥–∞—ë–º —Å–æ—Å—Ç–æ—è–Ω–∏—è
    step_1 = State()
    step_2 = State()

# –°–æ–∑–¥–∞—ë–º Telegram –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä:
Bot = aiogram.Bot(os.environ["TOKEN"])
DP = aiogram.Dispatcher(Bot, storage=MemoryStorage())
Compatibility = {1: "–ú—É–∂—á–∏–Ω–∞ –±—É–¥–µ—Ç –≥–ª–∞–≤–æ–π —Å–µ–º—å–∏, –Ω–∞–≤—è–∑—ã–≤–∞—è —Å–≤–æ–µ –º–∏—Ä–æ–≤–æ–∑–∑—Ä–µ–Ω–∏–µ. –î–µ–≤—É—à–∫–µ –ª—É—á—à–µ –Ω–µ –≤–º–µ—à–∏–≤–∞—Ç—å—Å—è –≤ –µ–≥–æ –¥–µ–ª–∞ –∏ –Ω–µ –ø—Ä–æ–≤–æ—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏. –í —Ü–µ–ª–æ–º —Å–æ—é–∑ –ø–æ–ª—É—á–∏—Ç—Å—è –æ—á–µ–Ω—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º –∏ —Ç–≤–æ—Ä—á–µ—Å–∫–∏–º. –ì–ª–∞–≤–Ω–æ–µ, –Ω–∞–π—Ç–∏ —Ç–æ—á–∫–∏ —Å–æ–ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è,–∂–µ–Ω—â–∏–Ω–µ –ø—Ä–∏–¥—ë—Ç—Å—è —É—Å—Ç—É–ø–∞—Ç—å.",
2: "–í—ã —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥—É—à–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–Ω–∏–º–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –±–µ–∑ —Å–ª–æ–≤. –í –≤–∞—à–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –±—É–¥–µ—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω–∞—è –≥–∞—Ä–º–æ–Ω–∏—è,—Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ –±–µ—Å–µ–¥—ã —É–∫—Ä–µ–ø—è—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è.", 3: "–°—Ç–∞–±–∏–ª—å–Ω–∞—è –∫—Ä–µ–ø–∫–∞—è —Å–µ–º—å—è, –≤ –∫–æ—Ç–æ—Ä–æ–π –≥–ª–∞–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∂–µ–Ω—â–∏–Ω–∞. –ü–æ—Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –Ω–µ —Å–ª—É—à–∞—Ç—å —Å–æ–≤–µ—Ç—ã –±–ª–∏–∑–∫–∏—Ö —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–∑–∞–∏–º–æ–ø–æ–Ω–∏–º–∞–Ω–∏–µ –∏ –≥–∞—Ä–º–æ–Ω–∏—é.",
4: "C—Ç—Ä–∞—Å—Ç—å –∏ —Å–∏–ª—å–Ω—ã–µ —ç–º–æ—Ü–∏–∏ –±—É–¥—É—Ç –ø—Ä–µ–æ–±–ª–∞–¥–∞—Ç—å –Ω–∞–¥ –∑–¥—Ä–∞–≤—ã–º —Å–º—ã—Å–ª–æ–º. –ü–æ—Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –ª–∏—á–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –∏ –Ω–µ –ø–æ–¥–¥–∞–≤–∞–π—Ç–µ —Ä–∞–∑—Ä—É—à–∏—Ç–µ–ª—å–Ω–æ–º—É —á—É–≤—Å—Ç–≤—É —Ä–µ–≤–Ω–æ—Å—Ç–∏.–ú—É–∂—á–∏–Ω–∞ –¥–æ–º–∏–Ω–∏—Ä—É–µ—Ç –≤ –ø–∞—Ä–µ.", 5: "–¶–µ–Ω–∏—Ç–µ —Å–≤–æ–µ–≥–æ –ø–∞—Ä—Ç–Ω–µ—Ä–∞. –û–Ω –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Å–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∂–∏–∑–Ω–∏ –∏ –∑–∞–Ω—è—Ç—å –≤–µ—Ä–Ω—É—é –ø–æ–∑–∏—Ü–∏—é. –ù–µ –æ–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏—è –Ω–∞ —Ä–∞–∑–Ω–∏—Ü—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–≤, —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç–∞ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è.",
6: "–ù–µ–¥–æ–ø–æ–Ω–∏–º–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω–∞—á–∞–ª—å–Ω–æ–º —ç—Ç–∞–ø–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π. –ß–µ–º –¥–æ–ª—å—à–µ –≤—ã –≤–º–µ—Å—Ç–µ, —Ç–µ–º —Å–∏–ª—å–Ω–µ–µ –ª—é–±–æ–≤—å, —Å—á–∞—Å—Ç—å–µ –∏ –≤–∑–∞–∏–º–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞.–û–±–∞ —Ü–µ–Ω–∏—Ç–µ –∫—Ä–∞—Å–æ—Ç—É –∏ –≥–∞—Ä–º–æ–Ω–∏—é.", 7: "–Ø—Ä–∫–∏–µ –∏ –¥–∏–Ω–∞–º–∏—á–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –Ω–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è–º–∏ –∏ –Ω–æ–≤—ã–º–∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞–º–∏. –û–¥–Ω–∞–∫–æ –≤—ã—Å–æ–∫–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω—ã.–û–¥–∏–Ω –∏–∑ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤ –º–æ–∂–µ—Ç —É–≤–ª–µ—á—å—Å—è –¥—Ä—É–≥–∏–º.",
8: "–≠—Ç–æ —Å–∫–æ—Ä–µ–µ –±—Ä–∞–∫ –Ω–∞ –≤–∑–∞–∏–º–æ–≤—ã–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö. –ù–µ –ø—ã—Ç–∞–π—Ç–µ—Å—å –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä–∞, –º–µ–Ω—è–π—Ç–µ—Å—å —Å–∞–º–∏.", 9: "–≠—Ç–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å–ª–æ–∂–Ω–æ –Ω–∞–∑–≤–∞—Ç—å –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–º–∏. –û–±–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –±—É–¥—É—Ç –∏—Å–ø—ã—Ç—ã–≤–∞—Ç—å –≤–∑–∞–∏–º–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞, –Ω–µ—Ö–≤–∞—Ç–∫—É –ª—é–±–≤–∏ –∏ –≤–Ω–∏–º–∞–Ω–∏—è. –ï—Å–ª–∏ —Ü–µ–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥—Ä—É–≥ –¥—Ä—É–≥–∞,—Ç–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –ø—Ä–æ–¥–ª—è—Ç—Å—è –¥–æ–ª–≥–æ.",
10: "–í–∞–º –Ω–µ—Å–∫–∞–∑–∞–Ω–Ω–æ –ø–æ–≤–µ–∑–ª–æ. –û—Ç–Ω–æ—à–µ–Ω–∏—è –ø–æ–º–æ–≥—É—Ç –¥–æ–±–∏—Ç—å—Å—è —É—Å–ø–µ—Ö–∞ –∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏—É–º–Ω–æ–∂–∏—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –±–ª–∞–≥–æ—Å–æ—Å—Ç–æ—è–Ω–∏–µ. –≠—Ç–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –Ω–∞ –≤—Å—é –∂–∏–∑–Ω—å.", 11: "–ù–µ–ø—Ä–æ—Å—Ç—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è. –û–±–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ —Å–∏–ª—å–Ω—ã–µ –¥—É—Ö–æ–º –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã—Ö–æ–¥ ‚Äì –∏—Å–∫–∞—Ç—å –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã –∏ —É—Å—Ç—É–ø–∞—Ç—å.",
12: "–û—Ç–Ω–æ—à–µ–Ω–∏—è –º–æ–≥—É—Ç –Ω–∞—á–∞—Ç—å—Å—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ,–Ω–µ–æ–±—ã—á–Ω–æ. –ß—Ç–æ–±—ã –∏—Ö —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–∏–¥–µ—Ç—Å—è –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤–∞–∂–Ω—ã—Ö –≤–µ—â–µ–π –∏–ª–∏ –ª—é–¥–µ–π.", 13: "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è,–≥–¥–µ –∫–∞–∂–¥—ã–π –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä–∞.–û—Ç–Ω–æ—à–µ–Ω–∏—è –∏–ª–∏ –Ω–∞ –≤—Å—é –∂–∏–∑–Ω—å,–∏–ª–∏ –±—ã—Å—Ç—Ä—ã–π —Ä–∞–∑—Ä—ã–≤.",
14: "–£ –≤–∞—Å –æ–±—â–∏–µ —Ü–µ–ª–∏, –≤–∞–º –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ –∏ —É—é—Ç–Ω–æ –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º. –°–æ—é–∑ –±—É–¥–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω—ã–º –∏ —Å—á–∞—Å—Ç–ª–∏–≤—ã–º.", 15: "–í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –≤–∞–∂–Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–∞—è —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è,–ø–∞—Ä—Ç–Ω–µ—Ä—ã –æ—á–µ–Ω—å –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω—ã –≤ –¥–µ–Ω—å–≥–∞—Ö.–í–æ–∑–º–æ–∂–Ω—ã –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏.",
16: "–ß–∞—Å—Ç—ã–µ —Å—Å–æ—Ä—ã –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏  –∫ —Ä–∞—Å—Å—Ç–∞–≤–∞–Ω–∏—é –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–µ—Å—Å–∏–ª—è—Ç –∫–∞–∫ –º–æ—Ä–∞–ª—å–Ω–æ, —Ç–∞–∫ –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏.–î–ª—è –≤–∑–∞–∏–º–æ–ø–æ–Ω–∏–º–∞–Ω–∏—è –Ω—É–∂–Ω–æ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–µ –∑–∞–Ω—è—Ç–∏–µ, —É–∫—Ä–µ–ø–∏—Ç —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –¥–æ–º–∞.", 17: "–ø–∞—Ä—Ç–Ω–µ—Ä—ã –æ—á–µ–Ω—å —è—Ä–∫–∏–µ,—Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ. –¶–µ–Ω–∏—Ç–µ —Å–≤–æ–µ–≥–æ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∂–∏–≤–µ—Ç–µ —Å –Ω–∏–º –¥–æ–ª–≥—É—é –∏ —Å—á–∞—Å—Ç–ª–∏–≤—É—é –∂–∏–∑–Ω—å.",
18: "–í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –≤–æ–∑–º–æ–∂–Ω—ã —Ç–∞–π–Ω—ã –∏ —Å–µ–∫—Ä–µ—Ç—ã,–∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É –≤—Å–ø–ª—ã—Ç—å.–í–∞–∂–Ω–æ –≤—ã—è—Å–Ω–∏—Ç—å –≤—Å–µ –≤ —Å–∞–º–∞ –Ω–∞—á–∞–ª–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π,—á—Ç–æ–±—ã –ø–æ—Ç–æ–º –Ω–µ –±—ã–ª–æ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–π.", 19: "–£ –≤–∞—Å –≤—Å–µ –æ—Ç–ª–∏—á–Ω–æ: –∫—Ä–µ–ø–∫–∞—è —Å–µ–º—å—è, —Å—á–∞—Å—Ç–ª–∏–≤—ã–µ –¥–µ—Ç–∏, –≤–∑–∞–∏–º–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∞–±—Å–æ–ª—é—Ç–Ω–∞—è –≥–∞—Ä–º–æ–Ω–∏—è.",
20: "–ö—Ä–µ–ø–∫–∞—è —Å–µ–º—å—è —Å —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–º–∏ —Å–µ–º–µ–π–Ω—ã–º–∏ —Ü–µ–Ω–Ω–æ—Å—Ç—è–º–∏.–û—á–µ–Ω—å —Ü–µ–Ω—è—Ç —Ä–æ–¥.–í–∞–∂–Ω–æ –ø–æ–º–æ–≥–∞—Ç—å –±–ª–∏–∑–∫–∏–º.", 21: "–í—ã —Å–æ–≤–º–µ—Å—Ç–∏–º—ã –Ω–∞ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–º —É—Ä–æ–≤–Ω–µ. –ì–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º –¥–ª–∏–Ω–æ—é –≤ –∂–∏–∑–Ω—å.–ú–æ–∂–µ—Ç–µ —á–∞—Å—Ç–æ –º–µ–Ω—è—Ç—å –º–µ—Å—Ç–æ –∂–∏—Ç–µ–ª—å—Å—Ç–≤–∞.",
22: "–ö—Ä–∞–π–Ω–µ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è. –û–¥–∏–Ω –∏–∑ –≤–∞—Å –∂–∞–∂–¥–µ—Ç —Å–≤–æ–±–æ–¥—ã. –û–¥–∏–Ω –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–∂–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –¥—Ä—É–≥–æ–≥–æ. –í—ã—Å–æ–∫–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–æ–¥–∞."}


@DP.message_handler(commands=["start"])      # –ö–û–ì–î–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ –ü–ò–®–ï–¢ /start
async def start(msg: Message):
    keyboard = ReplyKeyboardMarkup()
    keyboard.add('–£–∑–Ω–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å üßø')
    await msg.answer("–ü—Ä–∏–≤–µ—Ç!üëã \n\n–Ø –ë–æ—Ç-–∞—Å—Ç—Ä–æ–ª–æ–≥ –¥–ª—è –ø—Ä–æ—Å—á—ë—Ç–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –ø–æ –¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è! –ù–∞–∂–º–∏ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å!", reply_markup=keyboard)


@DP.message_handler() 
async def just_handler(msg: Message):
    if msg.text == "–£–∑–Ω–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å üßø":
        await msg.answer("–ù–∞–ø–∏—à–∏ —Å–≤–æ—é –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ: 11.10.1980, 05.05.1979")
        await UserState.step_1.set()
    else:
        await msg.answer("–ö–æ–º–∞–Ω–¥–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞! ‚ùå")


@DP.message_handler(state=UserState.step_1)  # –ö–æ–≥–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å step_1
async def Find_out_compatibility_step_1(msg: Message, state: FSMContext):
    await state.update_data(first_date=sum([int(i) for i in "24.04.2008" if i != "."]))
    await msg.answer("–¢–µ–ø–µ—Ä—å –Ω–∞–ø–∏—à–∏ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: 11.10.1980, 05.05.1979")
    await UserState.step_2.set()


@DP.message_handler(state=UserState.step_2)  # –ö–æ–≥–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å step_2
async def Find_out_compatibility_step_2(msg: Message, state: FSMContext):
    data = await state.get_data()
    result = data["first_date"] + sum([int(i) for i in "24.04.2008" if i != "."])
    while result > 22:
        result -= 22

    await msg.answer(Compatibility[result])


if __name__ == "__main__":  # –ï—Å–ª–∏ —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π, –∞ –Ω–µ –∫–∞–∫ –º–æ–¥—É–ª—å
    logger.info("–ó–∞–ø—É—Å–∫–∞—é –±–æ—Ç–∞...")  # –í –∫–æ–Ω—Å–æ–ª–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–æ–∂—ë–Ω –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
    executor.start_polling(  # –ë–æ—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
        dispatcher=DP,  # –ü–µ—Ä–µ–¥–∞–µ–º –≤ —Ñ—É–Ω–∫—Ü–∏—é –¥–∏—Å–ø–µ—Ç—á–µ—Ä
        # (–¥–∏—Å–ø–µ—Ç—á–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ç–æ, —á—Ç–æ–±—ã —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ—Ö–æ–¥–∏–ª–∏ –¥–æ –±–æ—Ç–∞)
        on_startup=logger.info("–ó–∞–≥—Ä—É–∑–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ!"), skip_updates=True)
    # –ï—Å–ª–∏ –±–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è, —Ç–æ –≤ –∫–æ–Ω—Å–æ–ª—å –≤—ã–≤–µ–¥–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ